# lp(home#index)
```ruby


<!-------what is eigopencil?--------------->
<div class="min-h-screen">

  <div class="text-center mt-6">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-9 mx-auto">
  <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
  </svg>
  <h1 class="text-2xl font-bold text-gray-800">
  eigopencil.comとは？
  </h1>
  </div>

  <div class="text-center mt-6">
    <p class="m-2">
    あなたが学習した英語の内容(英単語、フレーズ、短い文章からブログのような長文など)を投稿し、その内容が登録したメールアドレスへ後日送られるサービスです。
    </p>
  </div>

 <div class="text-center m-6">
 <%= image_tag("theme03.webp", class: "mx-auto max-w-[320px] h-auto rounded-lg") %>

 </div>

</div>



<!-------users problem--------------->
<div class="min-h-screen">

  <div class="text-center mt-6">
  <h1 class="text-2xl font-bold text-gray-800">
  「せっかく時間をかけて英語を勉強したのに、いざ使おうとしたら単語が出てこない…」そんな経験、ありませんか？
  </h1>
  </div>

<div class="text-left mt-6">
  <ul>
  <li>😥 仕事や学校に追われ自ら復習する気力がない</li>
  <li>😥 どこを学習したのか、忘れてしまっている</li>
  <li>😥 復習をしようと思っても、モチベーションが続かない</li>
  <li>😥 復習する時間があったら、新しい内容を学びたい気持ちを抑えられない</li>
  <li>😥 復習を習慣化できていない</li>
  </ul>
  </div>
  <div class="text-center mt-6">
    <p class="m-2">
    「研究によると、人間は覚えたことの約70%を24時間以内に忘れてしまうと言われています。

(**エビングハウスの忘却曲線:** https://en.wikipedia.org/wiki/Forgetting_curve)

つまり、復習をしなければ、せっかく勉強した内容もほとんど無駄になってしまうのです。
    </p>
  </div>

 <div class="text-center m-6">
 <%= image_tag("theme03.webp", class: "mx-auto max-w-[320px] h-auto rounded-lg") %>
 <p class="text-xl font-bold">では、どうすればいいのでしょうか?</p>
 <p class="text-xl font-bold">
 それは、適切なタイミングで復習を重ねることです。そうすることで、知識はしっかりと定着します！(間隔反復（Spaced Repetition: https://en.wikipedia.org/wiki/Spaced_repetition 学術論文: https://journals.sagepub.com/doi/10.1111/j.1467-9280.2008.02209.x 論文を引用したブログ: https://fs.blog/spacing-effect/ 本: https://www.amazon.com/Make-Stick-Science-Successful-Learning/dp/0674729013 ブログ: https://e-student.org/spaced-repetition/)
 </p>
 <p class="text-xl font-bold">
 そこで、あなたが学習した内容を時間が経った後にリマインドしてくれるようなツールがあったら便利だと思いませんか?そこで、こんな人に向けて、eigopencilを作りました。
 </p>
 </div>

</div>


<!-------solution--------------->
<div class="flex items-center justify-center min-h-screen">
  <div class="text-center">
    <h1 class="text-xl font-semibold text-gray-800 mb-2">
    eigopencil.comは、あなたが投稿した学習内容を後日、自動でリマインドします。あなたはメールの通知をONにすればいいだけです！
    </h1>
  </div>
</div>

<!-------detail about app(price, how to use, )--------------->
<div class="flex items-center justify-center min-h-screen bg-gray-100">
  <div class="text-center">
    <h1 class="text-xl font-semibold text-gray-800 mb-2">
    使い方は簡単！
    </h1>
    <p class="text-gray-500">
    こうやって、こうやってこうやるんです!
    </p>
  </div>
</div>


<!-------action--------------->
<div class="flex items-center justify-center min-h-screen bg-gray-100">
  <div class="text-center">
    <h1 class="text-xl font-semibold text-gray-800 mb-2">
    eigopencilを活用して、英語ができるかっこいい大人になろう！
    </h1>
    <p class="text-gray-500">
    **￥**1000 / 月額

    　　　　　　　　　　　　　サブスクリプション料金(税込)
    
    　　　　　　　　　　　　　　　　ボタンとかstripe
    </p>
  </div>
</div>


<!-------get in touch--------------->
<div class="flex items-center justify-center min-h-screen bg-gray-100">
  <div class="text-center">
    <p class="text-gray-500">
    ニュースレターのwaitlist登録をもう一度ここで確認させる。
    </p>
  </div>
</div>

-----------------------------------------------------------------------

<head>
  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800">

<section class="min-h-screen flex flex-col justify-center items-center py-16 bg-blue-50">
<div class="text-center mb-6">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="mx-auto w-16 h-16">
    <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
  </svg>
  <h1 class="text-2xl font-bold text-gray-800">eigopencil.com</h1>
</div>

<div class="text-center mb-6">
  <h2 class="text-3xl font-bold text-gray-800 mb-2">
    勉強した英語はもう<span style="color: #0057ff;">忘れない！</span>復習を自動化して<span style="color: #0057ff;">確実に</span>定着させよう。
  </h2>
  <p class="m-2 text-xl">
    必要なのはスマホまたはPCのみ。あなたの学習した内容が後日メールへ届きます。
  </p>
</div>

<div class="text-center mt-6">
  <p class="text-gray-500">
    eigopencil.comはただいま開発中です。リリース情報を受け取るために、下記フォームにメールアドレスを登録してください！
  </p>
</div>

<!-- Email Sign-up Form -->
<div class="mt-8">
  <form class="flex justify-center gap-4">
    <input type="email" placeholder="あなたのメールアドレス" class="px-4 py-2 rounded-full text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-72" required>
    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">登録</button>
  </form>
</div>
</section>


  <!-- What is eigopencil? Section -->
  <section class="min-h-screen bg-gray-100 py-16">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-gray-800">eigopencil.comとは？</h2>
    </div>

    <div class="text-center max-w-2xl mx-auto mb-6">
      <p class="text-lg text-gray-700">eigopencil.comは、あなたが学習した英語の内容を投稿し、その内容を後日自動でメールにてお届けするサービスです。あなたの学習を継続的にサポートします。</p>
    </div>

    <div class="text-center">
      <img src="https://via.placeholder.com/320x200" alt="eigopencil screenshot" class="mx-auto max-w-[320px] rounded-lg shadow-lg">
    </div>
  </section>

  <!-- Users' Problems Section -->
  <section class="min-h-screen py-16 bg-white">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-gray-800">「せっかく勉強したのに、いざ使おうとしたら単語が出てこない…」そんな経験、ありませんか？</h2>
    </div>

    <div class="max-w-2xl mx-auto text-left text-lg">
      <ul class="space-y-4 text-gray-700">
        <li>😥 仕事や学校に追われ自ら復習する気力がない</li>
        <li>😥 どこを学習したのか、忘れてしまっている</li>
        <li>😥 復習をしようと思っても、モチベーションが続かない</li>
        <li>😥 復習する時間があったら、新しい内容を学びたい気持ちを抑えられない</li>
        <li>😥 復習を習慣化できていない</li>
      </ul>
    </div>

    <div class="text-center mt-8">
      <p class="text-lg text-gray-600">人間は、覚えたことの約70%を24時間以内に忘れてしまうと言われています。<a href="https://en.wikipedia.org/wiki/Forgetting_curve" class="text-blue-600">エビングハウスの忘却曲線</a>をご覧ください。</p>
    </div>

    <div class="text-center mt-8">
      <p class="text-xl font-bold">では、どうすればいいのでしょうか?</p>
      <p class="text-xl font-semibold mt-4 text-gray-700">それは、適切なタイミングで復習を重ねることです！</p>
      <p class="mt-4 text-lg text-gray-600">eigopencilは、あなたが学習した内容を効果的にリマインドし、記憶を定着させるお手伝いをします。</p>
    </div>
  </section>

  <!-- Solution Section -->
  <section class="min-h-screen bg-blue-50 py-16">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-gray-800">eigopencil.comは、あなたの学習内容を後日リマインドします！</h2>
      <p class="mt-4 text-lg text-gray-700">投稿した内容が自動でメールで届くので、復習を自動化できます。</p>
    </div>

    <div class="text-center">
      <button class="px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">今すぐ始める</button>
    </div>
  </section>

  <!-- Pricing Section -->
  <section class="min-h-screen bg-gray-100 py-16">
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-gray-800">使い方は簡単！</h2>
      <p class="text-lg text-gray-600 mt-4">あなたの学習内容を投稿するだけ！後は自動的にリマインドされます。</p>
    </div>

    <div class="text-center mt-8">
      <h3 class="text-xl font-semibold text-gray-800">月額料金</h3>
      <p class="text-2xl font-bold text-blue-600 mt-2">￥1000 / 月額（税込）</p>
    </div>

    <div class="text-center mt-8">
      <button class="px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">今すぐ登録</button>
    </div>
  </section>

  <!-- Footer Section -->
  <section class="min-h-screen bg-blue-600 py-16 text-white text-center">
    <p>ニュースレターの最新情報を受け取るために、以下から再度登録してください。</p>

    <div class="mt-8">
      <form class="flex justify-center gap-4">
        <input type="email" placeholder="あなたのメールアドレス" class="px-4 py-2 rounded-full text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-72" required>
        <button type="submit" class="px-6 py-2 bg-blue-700 text-white rounded-full hover:bg-blue-800 transition">登録</button>
      </form>
    </div>
  </section>

</body>
```
 # home#index
 ```ruby
 <div class="text-center mt-3" id="nav-section">
  <% if current_user.nil? %>
    <p>hey, ゲストさん! 
      <%= link_to "ログイン", login_path, class: "text-decoration-none text-blue-500" %>
    </p>
  <% else %>
    <div class="flex items-center justify-between w-full">
      <span></span> <!-- Left side empty space -->
      <span class="text-center flex-grow">
        hey, <%= current_user.name %>👋
      </span>
    </div>
  <% end %>
</div>

<div class="mt-5">
<%= render template: "microposts/index" %>
</div>
 ```
# xカードの実装
metaタグ
https://github.com/kpumuk/meta-tags
ogp(open graph protocol) cardを表示させるための機能
https://ogp.me/
xドキュメント
https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/abouts-cards
https://developer.x.com/en/docs/x-for-websites/cards/overview/summary-card-with-large-image
https://developer.x.com/en/docs/x-for-websites/cards/guides/getting-started

is card verifyed??
https://cards-dev.x.com/validator

- ogpメタタグとlink_toの関係
お互い直接通信しているわけでは無い。
ogp: URLがシェアされた時に感知
link_to: xへのリンクを生成するコード

link_toでxへの投稿画面にデータを入力する
↓
ユーザーが投稿する。
↓
xがそのリンク先をクロールし、OGPメタタグを読み取る。
それに基づいてxがリッチなプレビューカードを表示する。
↓
つまり、link_toでxの投稿画面に入力されたデータを、ogpが制御している。

# 文字数、太字テキストエリア

```ruby
<div id="post" class="mt-5 m-2">
  
  <!-- ツールバー -->
  <div class="toolbar mb-2 flex justify-between items-center">
    <div class="flex space-x-2">
      <button class="px-4 py-2 rounded-md" id="bold-button">
        <strong>B</strong>
      </button>
      <!-- 他のフォーマットボタンもここに追加可能 -->
    </div>
    <div class="text-sm text-gray-600" id="char-count">0 / 1000</div>
  </div>
  
  <!-- フォーム -->
  <%= form_with(model: @micropost, url: zen_create_path(slug: @user.slug), method: :post, local: true, html: { class: "micropost-form" }) do |f| %>
    <!-- 編集エリア -->
    <div class="field">
      <div
        id="editor"
        contenteditable="true"
        class="p-4 rounded border shadow-md hover:shadow-lg transition-shadow duration-300 w-full h-[400px]"
        data-placeholder="I have pen, I have an apple Uh! Apple-pen"
        style="min-height: 100px; overflow-y: auto;"
      >
        I have pen, I have an apple Uh! Apple-pen
      </div>
      <!-- 隠しフィールド（フォーム送信時にエディタの内容を保存） -->
      <%= f.hidden_field :content, id: "hidden_content" %>
    </div>
  
    <!-- 送信ボタン -->
    <div class="actions text-right mt-2">
      <button
        class="px-4 py-2 bg-gray-200 text-gray-500 border border-gray-300 
               rounded-md cursor-not-allowed
               disabled:hover:bg-gray-200 disabled:opacity-50"
        disabled
      >
        🤖AI
      </button>
  
      <button class="hover:bg-yellow-500 px-4 py-2 bg-gray-100 border border-gray-300 text-gray-700 
                     hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 
                     focus:ring-gray-300 rounded-md">
        <%= link_to "📸 手書きを読み取る", camera_path(@user), class: "submit-button text-dark text-decoration-none" %>
      </button>
  
      <%= f.submit "📝 下書き保存", name:"draft", class: "hover:bg-yellow-500 px-4 py-2 bg-gray-200 border border-gray-300 text-gray-800 
                 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 
                 focus:ring-gray-400 rounded-md" %>
  
      <%= f.submit "post", class: "hover:bg-yellow-500 px-4 py-2 bg-gray-200 border border-gray-300 text-gray-800 
                 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 
                 focus:ring-gray-400 rounded-md" %>
    </div>
  <% end %>
  
  <!-- プレースホルダー用のCSS -->
  <style>
    [data-placeholder]:empty::before {
      content: attr(data-placeholder);
      color: #aaa;
      pointer-events: none;
    }
  </style>
  
</div><!--post-->

<!-- JavaScriptの修正 -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const boldButton = document.getElementById('bold-button');
    const editor = document.getElementById('editor');
    const hiddenContent = document.getElementById('hidden_content');
    const form = editor.closest('form');
    const charCount = document.getElementById('char-count');
    const MAX_CHARS = 1000;

    // 編集エリアの内容を隠しフィールドに同期
    function syncContent() {
      hiddenContent.value = editor.innerHTML;
    }

    // 文字数をカウントして表示
    function updateCharCount() {
      // innerText を使用してプレーンテキストの文字数を取得
      let text = editor.innerText || "";
      let currentCount = text.length;
      
      // 1000文字を超えている場合の処理
      if (currentCount > MAX_CHARS) {
        charCount.textContent = `${MAX_CHARS} / ${MAX_CHARS}`;
        charCount.classList.add('text-red-500');
        // 超えた場合は追加の文字を削除する
        // 以下のコードはオプションです。ユーザーが1000文字以上入力できないようにします。
        // ただし、HTMLタグを含む場合は適切な処理が必要です。
        editor.innerText = text.substring(0, MAX_CHARS);
        currentCount = MAX_CHARS;
      } else {
        charCount.textContent = `${currentCount} / ${MAX_CHARS}`;
        charCount.classList.remove('text-red-500');
      }
    }

    // ボタンのクリックイベント
    boldButton.addEventListener('click', function(event) {
      event.preventDefault();
      document.execCommand('bold', false, null);
      syncContent();
      updateCharCount();
    });

    // フォーム送信時に内容を同期
    form.addEventListener('submit', function() {
      syncContent();
    });

    // 編集エリアの入力イベント時にも同期（リアルタイム）
    editor.addEventListener('input', function() {
      syncContent();
      updateCharCount();
    });

    // 初期文字数カウントの更新
    updateCharCount();
  });
</script>

```

# tailwind css
## font
font-thin (100)
font-extralight (200)
font-light (300)
font-normal (400)
font-medium (500)
font-semibold (600)
font-bold (700) eaad42
font-extrabold (800)
font-black (900)
## font-size
text-xs	
text-sm	
text-base
text-lg	
text-xl	
text-2xl	
text-3xl	
text-4xl	
text-5xl	
text-6xl		
text-7xl	
text-8xl	
text-9xl

# meta
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- tuboを一時的に無効化 deleteが機能しないから -->
     <%= javascript_include_tag 'application', 'data-turbo-track': 'reload', defer: true %>
     <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
     <%= stylesheet_link_tag "application", media: 'all', "data-turbo-track": "reload" %>
    <!-- これが全てのbootstrapのデザイン(navbar,form)を支えている。↓ -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
     <%= javascript_importmap_tags %> 
     
ユーザーを登録する(gem deviseを使用する)
↓
文字をpostして、
DBに格納して、
それをDBから出して
viewに表示してみる。


- 一日一回投稿したら、次は投稿できなくなる。
- 間違えたら?(まあいっか。あとで)


- deviseでmailログインではなく、名前やxでログインできるようにしてみる。
- x専用でログインさせる
- 投稿できるようにする(now!)
- submitをクリックしたら、というアクションを書く。
よくGPTを読んでから書き始める。
投稿して、submitして、表示するのはいくつかのアクションが重なる。railsではアクションごとに分ける必要があるため、いちいちページをロードする必要がある。その後にajaxとかをやればいい。まずはrailsのルールに則ってやってみる。まずは紙に書いてみる。

submitボタンを押したら投稿されたい。
'entries/new'のページをレンダリングするのではなく、entries/newの中で'form'というファイルをレンダリングして、users/createでも同じようにレンダリングする。

- entries/newの送信フォームボタンをusers/showに表示したい
entries/newでレンダリングして置いておいた_form.html.erbをusers/showにもレンダリングして表示する。


分かりやすくするためにusers/newという風にレンダリングしていく。そしてusers/showでデータを送信すると、ちゃんとレンダリング先のentries/createへ移動するから大丈夫。

- show.html.erbをそのままレンダリングするとエラーになる。だから_showとしてshowにレンダリングして、_showをusersにもレンダリングした。二段階にする理由はentriesの効果を聞かせるためにはentries/showに存在させておく必要があるから。

- 次は、この送信ボタンをレンダリングしてくる必要がある。
entries/newとentries/_newを作る
_newをnewにレンダリングする
users/showに_newをレンダリングする。
↓
デザインをよくする。

#　今
- ✅投稿したやつをXにシェアする機能をつける。
- aboutページを作って日記でもフレーズでもいいよ。youtubeを見つけてあ、このフレーズをいい言葉だなーと思ったらメモしておくとか(実際にdeamon dominiqueの動画のフレーズを動画を貼って説明してみる。歌詞のワンフレーズでも言い方かっこいいなとか思ったら書いていく。自由度高く。
)
- ✅cssが被っているから統一する。show/indexとhome/index。しかもちょっとスタイルが違う。
- 名前でログイン
- ユーザーアイコンを設定する。
- 投稿するvalidationを追加する。(140字以内)





# 収益化
みんなの投稿が見れる。
分からない時とかは、投稿した人のリンクを見れる。
データを分析できる。どれくらい英語が成長したとか。
ユーザーの日記を集めたリストを売る。
英語教材を売る。

# コア
コアがないから、デザインの段階で微妙になる。だからまず何をしたいのか。デザインの前にそこからやってみる。

xでシェアするときにカッコイイデザインにしておくのがポイントかも

# v0
ユーザーログイン機能
投稿できる。
xに投稿できる
# v1以降
文章をメモしておくことができる->有料
広告を省くことができる->有料
みんなの投稿を見ることができる->有料



# deviseでname追加
https://github.com/heartcombo/devise?tab=readme-ov-file#strong-parameters

- Rails 4 moved the parameter sanitization from the model to the controller, causing Devise to handle this concern at the controller as well.

この3つのみがmodelにデータを渡していく。(これにnameを追加すれば良いってことかな??)
sign_in (Devise::SessionsController#create) - Permits only the authentication keys (like email)
sign_up (Devise::RegistrationsController#create) - Permits authentication keys plus password and password_confirmation
account_update (Devise::RegistrationsController#update) - Permits authentication keys plus password, password_confirmation and current_password

でも、めんどくさかったらこうやって書くことができる

#

```ruby
class ApplicationController < ActionController::Base
  before_action :configure_permitted_parameters, if: :devise_controller?

  protected

  def configure_permitted_parameters
  #単純な例(他にも2つあるけど、まあこれでやってみる。)
  devise_parameter_sanitizer.permit(:sign_up, keys: [:username])
　end

end
```


これのemailをnameに変える。その色々な手続きをやる。
# githubに書いてあるやつを、もう一度全部訳してから理解してみる。
# HTTP/cookie(session)
- http: 前にやったことは忘れている。だから安全
- cookie: 覚えるように設定して、無駄な繰り返しを防ぐ。(railsではsessionメソッドがある。)
sessionがあるから、自分がすでにログインしたアカウントに次回もログインせずに使用することができるようになる。
そしてログアウトすると、sessionがdestroyされるような仕組みにする。

#　続き
logout errorになっているからそこを直す。
javascriptをrails7.0.8.6に導入していく。
doc: https://guides.rubyonrails.org/v7.0/
import mapを使って実装していく。(yarnとかwebpack必要ないから。)
↓
どうにもならんから、最初からにして、今まで書いたコードをコピーしてもう一回やっていくことにする。
↓

# 移行する必要があるもの
モデル:

app/models配下のファイル（例: user.rb, post.rbなど）。
コントローラー:

app/controllers配下のファイル（例: users_controller.rb, posts_controller.rbなど）。
APIを使っている場合はapp/controllers/api配下も忘れずに。
ビュー:

app/views配下のテンプレートファイル（例: users/index.html.erb, posts/show.html.erbなど）。
マイグレーションファイル:

db/migrate配下のマイグレーションファイルを新しいプロジェクトにコピー。
設定ファイル:

必要に応じてconfig配下のファイル（例: routes.rb, environmentsフォルダ内の設定ファイルなど）。
アセット（必要な場合）:

app/javascriptやapp/assets配下のJavaScript、CSS、画像ファイル。
Gemfile:

依存するGemを新しいGemfileに移行し、bundle installを実行。

# 移行する手順
dockerfile,ymlを新たなファイルで作る。
そこでrailsアプリを実行する。
↓
全てコピーして移行する。
↓
全てをonedayonelineにすり替えて、ちゃんと起動するか確かめる。


# デプロイ
https://railstutorial.jp/chapters/sign_up?version=4.2#sec-professional_grade_deployment



sessionは必要ないよね?
https://railstutorial.jp/chapters/updating_and_deleting_users?version=4.2#sec-friendly_forwarding
↑
ここから先は飛ばしている。
10/24
# 続き
write->
userpic->userページ->日記、ブクマ
初めての方はこちら->
ブログ->

zennみたいに、右上にlogin&ユーザーアイコンを書いてみる。

#　今
英語"日記"っていう言い方をもっと浸し見やすいもの、かっこいいものに変えればユーザーはもっと食いつくと思う。

英語ジャーナル
デイリースパーク (Daily Spark)
1日の始まりや気づきを英語で表現するイメージ。
Spark Daily
シンプルに「Spark」を前にしてリズミカルな響きに。
Daily Glow
「光」や「輝き」を連想させ、ポジティブな印象。
Word Spark
1日のひらめきを「言葉」にフォーカス。
Little Spark
1日の小さなひらめきを書き留める。
Daily Growth
日々の成長を表現。
Scribble Spark
気軽に落書きのように書く感覚。
Micro Spark
小さなひらめきが毎日積み重なるイメージ。
Spark Journey
小さなひらめきの旅が始まる。
Daily Seed
成長の種を毎日植えるイメージ。
Quick Glow
すぐに取り組める明るい記録。

「小さな言葉が、大きな成長を生む。」
「あなたの成長は、1行から始まる。」
「今日の1行が、明日の自信に。」
「気づけば英語が、あなたの日常に。」
「書くたびに、英語がもっと身近に。」
「英語力は、明日ではなく今日の1行から始まる。」
「未来の自分が感謝する習慣を、今始めよう。」
🔥「言葉にするたび、英語があなたのものになる。」
「1行の種が、大きな木に育つ。」

# どうやってユーザーを毎日自分のアプリに訪れさせるのか。
毎日毎日英語ジャーナルを続けさせるにはどうすればいいのか。
->自分が見本になる。
->ビジュアルで憧れさせる。
->🔥ユーザーを日記を書くことでどうよくなるのか何かで納得させる。(これやろ!自分がそうだから)
->🔥書いたジャーナルの進化を見せる：
AIがユーザーの投稿を読み取って成長を可視化する「あなたの英語力の進化レポート」を定期的に送る。

例：「今週のあなたの英語は、こんなに上達しました！」
英単語のカウント、語彙の広がりなどを可視化。
ビジュアルでのモチベーション：
ユーザーが英語で話している風景の生成に加え、ジャーナル内容をベースにした未来のシーン（例：英語でプレゼンする姿、旅行先で英語を話す自分）をイメージさせる。

# データベースDB無効化有効化
- gemfile
pgコメントアウト
- config/application.rb 
22-26 line
- config/database.yml
1-22 linesコメントアウト


```md
はい、Railsアプリケーションをデータベースを使用せずにデプロイすることは可能です。Railsはデフォルトでデータベースを必要としますが、アプリがデータベースを使用しない場合、以下の手順で設定を変更して対応できます。

Railsアプリをデータベースなしで動作させる方法
1. Gemfile の調整
データベース関連のGemを除去します。

以下のようなデータベース関連のGem（例: pg, sqlite3）をコメントアウトまたは削除します。

ruby
Copy code
# gem 'pg'         # PostgreSQL
# gem 'sqlite3'    # SQLite
Gemfileを更新したら、以下を実行します：

bash
Copy code
bundle install
2. データベースなしでRailsを初期化
Railsのアプリケーション設定でデータベースを無効化します。

config/application.rb の設定を編集：

ruby
Copy code
module YourAppName
  class Application < Rails::Application
    config.load_defaults 7.0
    config.api_only = false  # 必要に応じてAPIモードならtrue
    # データベースを無効化
    config.active_record.migration_error = :app_start # Rails 6以降
    config.active_record.database_selector = false
    config.active_record.legacy_connection_handling = false
  end
end
データベースモジュールを完全に無効化する場合は、以下を追加：

ruby
Copy code
config.generators do |g|
  g.orm :null
end
3. データベース設定を無効化
config/database.yml を削除するか無効化します。Herokuは DATABASE_URL を必要とする場合があるため、削除せず以下のように空の設定にしておくと安全です：

yaml
Copy code
default: &default
  adapter: null

development:
  <<: *default

test:
  <<: *default

production:
  <<: *default
4. Herokuへのデプロイ
Procfileを作成
アプリがデータベースなしで動作するように、Procfile を作成します。

text
Copy code
web: bundle exec rails server -b 0.0.0.0 -p $PORT
デプロイ手順
データベースなしでHerokuにデプロイします：

bash
Copy code
git add .
git commit -m "Deploy Rails app without database"
git push heroku main
Herokuの環境変数確認
DATABASE_URL が設定されている場合は、以下のコマンドで削除します：

bash
Copy code
heroku config:unset DATABASE_URL --app <アプリ名>
5. Railsが正しく動作するか確認
ブラウザでHerokuのURL（例: https://<アプリ名>.herokuapp.com）を開き、Railsアプリが動作していることを確認します。

注意点
データベースが不要な場合でも、一部のGemや機能（例: ActiveRecord）はデータベースに依存しています。それらを使用しないように設計する必要があります。
データベースを完全に無効化するのは基本的に推奨されませんが、静的なアプリや単純なAPIを提供する場合に適しています。
これでRailsアプリをデータベースなしでHerokuにデプロイできます！


I prefer this response
```

# render deploy
- hostブロック。多分render側のキャッシュだと思う。
↓
もう一回作り直すのも手だと思う。
ondayoneline.comのnotionに環境変数を書いておく。それをコピペ。

_micropost.html.erb

```ruby
<div class="diary-container">
        <div class="diary-entries">
            <ul id="entriesList" class="list-group">

            
            <p><%= micropost.content %>
               <%= micropost.created_at %>
               #これを押したら、/microposts.18というrouteへ移動することになる。
               <%= button_to "🗑️", micropost_path(micropost), method: :delete, data: { confirm: "Are you sure?" } %> 
               <p><%= micropost.inspect %></p>
            </p>      

            </ul>
        </div>
</div>
```



# current_userを省いて、friendlyを使う。完成させてからsessionをfriendlyに追加していく。

# 続き
- 手書き認識機能の実装
formでcontrollerに画像を投げる
controllerで処理する。

```ruby
  def analyze
    # formから画像ファイルを受け取る
    uploaded_file = params[:image]

    if uploaded_file.nil?
      flash[:alert] = "画像をアップロードしてください。"
      redirect_to root_path
      return
    end

    # tmpに一時保存
    file_path = Rails.root.join('tmp', uploaded_file.original_filename)
    #開いて、何かを実行している。
    File.open(file_path, 'wb') do |file|
      file.write(uploaded_file.read)
    end

    # OCRを実行
    recognized_text = HandwritingRecognizer.recognize(file_path)

    # 結果を表示
    render json: { text: recognized_text }
  ensure
    # 一時ファイルを削除
    File.delete(file_path) if File.exist?(file_path)
  end
```

problem: 結果が全然違う文字列が出力された。

ruby公式
https://github.com/dannnylo/rtesseract
公式の公式
https://github.com/tesseract-ocr/tesseract


- 処理前に精度を高くしてみる。
 今: rubyにminimagicというimagemagickを取り込むツールが用意されている。(https://github.com/minimagick/minimagick)



-「traineddata」ファイルを取り込んで(学習データ)実行する必要がある。
それでも変わらなかったら、
- 他のORMを探す



home#index.html

```ruby
<div class="text-center" id="nav-section">

<% @microposts.published.each do |micropost| %>
     <div class="diary-container">
        <div class="diary-entries">
            <ul id="entriesList" class="list-group">
          
      
            <div class="all-posts-section">
  <li style="list-style: none; display: flex; justify-content: space-between; align-items: center;">
    <span><strong class=""><%= micropost.user.name %></strong>: <%= micropost.content %></span>
    <span class="text-right text-muted" style="font-size: 0.9em;"><%= micropost.created_at.strftime("%Y/%m/%d") %></span>
  </li>
</div>

    
    </ul>
    </div>
</div>

  <% end %>
</div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  
```
_micropost_form.html.erb

```ruby
<!--ここでは、@userを意識する必要はない。rendered by users/show -->
<div class="diary-container">
  <div class="diary-entries">

<!-- irb(main):001> app.microposts_path(slug: "a")=> "/a/microposts" -->

<%= form_with(model: @micropost, url: "/#{@user.slug}/microposts", method: :post, local: true, html: { class: "micropost-form" }) do |f| %>
  <!-- 入力フィールド -->
  <div class="field">
    <%= f.text_area :content, 
      placeholder: "i dont think anything is hard. it just takes time.", 
      class: "form-control diary-textarea",
      style: "border: none; box-shadow: none;" %>
  </div>

  <!-- 送信ボタン -->
  <div class="actions text-right">
    <%= f.submit "下書き保存", name:"draft", class: "btn btn-light diary-submit-btn" %>
    <%= link_to "🤖", user_path(@user), class: "btn btn-light submit-button" %>
    <%= f.submit "post", class: "btn btn-light diary-submit-btn" %>
  </div>
<% end %>


  </div>
</div>
```

_micropost.html.erb
```ruby
<% @microposts.published.each do |micropost| %>
  <!-- Twitter Card用のcontent_for(helperメソッド。ここで定義するが、別の場所で利用する場合。) -->
  <% content_for :title, micropost.content.truncate(50) %>
  <% content_for :meta_description, micropost.content.truncate(150) %>
  <% content_for :twitter_image, asset_url("logo01.png") %>

  <!-- 表示部分 -->
  <div class="diary-container">
    <div class="diary-entries">
      <ul id="entriesList" class="list-group">
        <li class="list-group-item">
          <!-- コンテンツ部分 -->
          <p><%= micropost.content %> <span class="text-muted"><%= micropost.created_at.strftime("%Y-%m-%d") %></span></p>
          
       <% if current_user == @user %>
          <!-- 削除ボタン -->
          <%= button_to "🗑️", micropost_path(slug: @user.slug, id: micropost.id), method: :delete, class: "btn btn-sm" %>
          <!-- Xでシェアするボタン -->
          <%= link_to "X",
            "https://twitter.com/intent/tweet?text=#{CGI.escape("✏️ " + micropost.content + "\n")}%0A#{CGI.escape('https://eigopencil.com')}",
            target: "_blank",
            rel: "noopener",
            class: "btn btn-dark text-white btn-sm" %>
        <% end %>
        </li>
      </ul>
    </div>
  </div>
<% end %>
```

# 開発者流eigopencilの使い方

僕がeigopencilを使うときは、日頃英語のコンテンツをブログやkindleなどの文章やYouTubeの動画コンテンツを見たり聞いたりしている時に、「かっこいい言い方だな」「これよく聞くけどどういう意味なんだろう」と疑問に思った時に、そのフレーズを書き留めます。自分なりの文章に変えたいと思った時はそのフレーズや単語の意味を後から見直したときにわかるように記録し、その後オリジナルフレーズを書いておきます。
-- -- -- -- -- -- -- 
kazuma
2024/12/25
原文: My ridiculous intake of over six cups of coffee daily definitely pushed me over the edge, but it was only the catalyst, not the cause.(URL:https://levels.io/reset-your-life/) 

覚える単語/フレーズとその意味: pushed me over the edge: The phrase "pushed me over the edge" typically means that something caused a person to reach their breaking point emotionally, mentally, or in terms of patience. It suggests that the person was already close to their limit, and the event or action pushed them beyond their capacity to cope or remain composed. 

自作英文: coding 8h straight literally pushed me over the edge..

-- -- -- -- -- -- --

そしてそのまま覚えたい時はそのフレーズをそのまま書いて投稿しておきます。
-- -- -- -- -- -- -- 
i dont think anything is hard. it just takes time.
(url: youtube.com/hogehoge)
-- -- -- -- -- -- -- 


僕のテンプレートはここから使う事ができます。
そして、urlを共有することで、英語学習のコンテンツをみんなで共有する事ができます。
もちろん、ユーザーの皆さんの独自のやり方でもできるように、投稿するときはテンプレートを選択する事ができます。


# Hotwire(turbo, stimulus)
- なぜ学ぶ必要があるのか?
ユーザーエクスペリエンスを向上させるためにSPAを実装する。そこでvue,reactを一から学ぶか、hotwireを学ぶか。
## stimulus(https://stimulus.hotwired.dev/)
JSのコードが多くなった時に、controllerで複数のファイルに分けて開発することができる。特定の動作に関連するコードを見つけやすくする。

htmlもclassにdata-*と書いて分けるので、どこにJSの影響が出ているのか見やすくなる。

- 通常
```html
<button id="myButton">クリック</button>
<p id="myText">こんにちは</p>

<script>
  document.getElementById("myButton").addEventListener("click", () => {
    document.getElementById("myText").textContent = "こんにちは、世界！";
  });
</script>

```

- stimulus
railsのバックエンドの処理と似ている。
```html
<div data-controller="example">
  <button data-action="click->example#updateText">クリック</button>
  <p data-example-target="text">こんにちは</p>
</div>

<script>
// app/javascript/controllers/example_controller.js
import { Controller } from "@hotwired/stimulus";

export default class extends Controller {
  static targets = ["text"];

  updateText() {
    this.textTarget.textContent = "こんにちは、世界！";
  }
}
</script>
```

stimulusインストール手順
```ruby
gem "stimulus-rails"
```
```ruby: app/javascript/application.js
import "controllers";
```
```shell
rails g stimulus example
```
↓ generated from command above.
```ruby: app/javascript/controllers/example_controller.js
import { Controller } from "@hotwired/stimulus";

export default class extends Controller {
  connect() {
    console.log("Hello, Stimulus! This is the Example controller.");
  }
}
```
↓registerd atomatically after rails g~ at controller/index.js
```ruby: javascript/controller/index.js
import { application } from "./application";

import ExampleController from "./example_controller";
application.register("example", ExampleController);
```
呼び出す時
```ruby
<div data-controller="example">
  <p>Hello, Stimulus!</p>
</div>
```

portがかぶっていたら、こうやって避けることができる.
bin/devは、Railsに必要な複数のプロセス(Railsサーバー、アセットビルダー、CSSコンパイラーなど)を一括管理するツール。
```shell
PORT=3002 bin/dev
```

## turbo(https://www.hotrails.dev/)<- not official but creater is one of the committer of rails-turbo.

# question
英語を学ぶ理由も、学び方も、人それぞれ異なります。 だからこそ、eigopencilはあなた自身が自由に英語のライティングをアウトプットできるスペースを提供します。

ようこそ
eigopencilは、英語のライティングができるスペースを提供します。

日記や覚えたいフレーズの練習、短い文章、ブログのような長文など、目的やスタイルを問わず、自分らしい英語の表現を磨いていきましょう
- - - 

シンプルで直感的なデザインで、英語日記や覚えたいフレーズを使った自作英文、短い文章、さらにはブログのような長文まで、気軽に書く習慣を始められます。毎日のアウトプットを通じて、英語力を一歩ずつ高めていきましょう。

日記や覚えたいフレーズの練習、短い文章、ブログのような長文など、目的やスタイルを問わず、自分らしい英語の表現を磨いていきましょう


## シンプルなUI/UX
皆さんが、「書く」ことに集中できるように、シンプルなUI/UXを心がけました。
余計なリマインダー、広告などはありません。



# 通常
```ruby
<%= form_with(model: @post, local: true) do |form| %>
  <div class="field">
    <%= form.text_area :content %>
  </div>
<% end %>
```

# quill->隠しフィールドの形にする。
```ruby
<div id="editor">
    <%= f.text_area :content %>
</div>
```

違いは、ユーザーが入力したデータがそのまま送信される場合と、
ユーザーが入力する前後に動的な処理が行われる場合(リッチコンテンツなど)

--

quillの内容をpostボタンを押す前に.contentに格納しておく必要がある。
- リアルタイムで格納
- 送信前に格納

postを押した時に、投稿しますか?はい、いいえと表示し、はいを押したら格納して、データベースに送信するという順番でできるかも。


# quill
javascriptを機能させるために、app/javascript/application.jsの書き方を確かめるorそもそもapplication.jsが必要なのかを確かめつ必要がある。

どこにも載っていないから、とりあえず今は公式を見まくっている。
https://hotwired.dev/
https://railsguides.jp/v7.0/working_with_javascript_in_rails.html#import-maps%E3%81%A8javascript%E3%83%90%E3%83%B3%E3%83%89%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%A9%E3%81%A1%E3%82%89%E3%82%92%E9%81%B8%E3%81%B6%E3%81%8B